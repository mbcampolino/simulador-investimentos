"use strict";(self.webpackChunksimulador_investimentos=self.webpackChunksimulador_investimentos||[]).push([[592],{665:(p,n,o)=>{o.d(n,{h:()=>h});var c=o(4946),l=o(9862);let h=(()=>{class r{constructor(t){this.httpClient=t,this.total=0,this.lastMonthTax=0,this.currentSelic=0,this.investimentsByMonth=!1,this.model={initialValue:1e5,dueDate:1,dueDateType:"ano",taxType:"ano",taxValue:this.currentSelic,monthlyValue:1e3},this.historicData=[],this.getApiSelic("https://www.bcb.gov.br/api/servico/sitebcb/historicotaxasjuros")}taxesByMonth(){return"m\xeas"==this.model.taxType}dueDateTypeByMonth(){return"m\xeas"==this.model.dueDateType}calcFixedInvestment(){this.historicData=[];var t,a;t="ano"==this.model.dueDateType?12*this.model.dueDate:this.model.dueDate,a="ano"==this.model.taxType?this.model.taxValue/12:this.model.taxValue;for(var e=0;e<t+1;e++)if(0===e)this.historicData.push({currentMonth:0,currentTax:0,currentTotalWithTax:this.model.initialValue,currentTotalWithoutTax:this.model.initialValue,totalTax:0});else{var s=this.historicData[e-1].currentTotalWithTax/100*a;this.historicData.push({currentMonth:e,currentTax:s,currentTotalWithTax:this.historicData[e-1].currentTotalWithTax+s+this.model.monthlyValue,currentTotalWithoutTax:this.historicData[e-1].currentTotalWithoutTax+this.model.monthlyValue,totalTax:s+this.historicData[e-1].totalTax})}console.log(this.historicData)}formatValue(t,a=!0){return a?t.toLocaleString("pt-br",{style:"currency",currency:"BRL",minimumFractionDigits:2,currencyDisplay:"narrowSymbol"}):new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",currencyDisplay:"code"}).format(t).replace("EUR","").trim()}getApiSelic(t){return this.httpClient.get(t,{headers:{Accept:"application/json",withCredentials:"true"}}).subscribe(i=>{console.log(i.conteudo[0].MetaSelic),this.currentSelic=Number(Number(i.conteudo[0].MetaSelic).toFixed(2))},i=>{this.currentSelic=0,console.log("error catch"+i)})}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(l.eN))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);